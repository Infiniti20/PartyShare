{
  "version": 3,
  "sources": ["../app/cache.ts"],
  "sourcesContent": ["interface Cache {\r\n  [key: string]: any;\r\n}\r\nconst defaultCacheExpiration = 900000;\r\nclass CacheLayer {\r\n  _cache: Cache = {};\r\n  all() {\r\n    return this._cache;\r\n  }\r\n\r\n  get(\r\n    key: string,\r\n    func: () => any,\r\n    expiration: number = defaultCacheExpiration\r\n  ) {\r\n    let val = this._cache[key];\r\n    if (val === undefined) {\r\n      val = func();\r\n      this.set(key, val, expiration);\r\n    }\r\n    return val;\r\n  }\r\n\r\n  async getAsync(\r\n    key: string,\r\n    func: () => any,\r\n    expiration: number = defaultCacheExpiration\r\n  ) {\r\n    let val = this._cache[key];\r\n    if (val === undefined) {\r\n      val = func();\r\n      this.set(key, val, expiration);\r\n    }\r\n    return val;\r\n  }\r\n\r\n  set(key: string, val: any, expiration: number = defaultCacheExpiration) {\r\n    this._cache[key] = val;\r\n    setTimeout(() => {\r\n      this.del(key);\r\n    }, expiration);\r\n  }\r\n\r\n  del(key: string) {\r\n    delete this._cache[key];\r\n  }\r\n\r\n  flush() {\r\n    this._cache = {};\r\n  }\r\n\r\n  exists(key: string) {\r\n    return this._cache[key] !== undefined;\r\n  }\r\n}\r\n\r\nexport { CacheLayer };\r\n"],
  "mappings": "qIAAA,8BAGA,GAAM,GAAyB,IAC/B,OAAiB,CAAjB,aAJA,CAKE,YAAgB,GAChB,KAAM,CACJ,MAAO,MAAK,OAGd,IACE,EACA,EACA,EAAqB,EACrB,CACA,GAAI,GAAM,KAAK,OAAO,GACtB,MAAI,KAAQ,QACV,GAAM,IACN,KAAK,IAAI,EAAK,EAAK,IAEd,OAGH,UACJ,EACA,EACA,EAAqB,EACrB,CACA,GAAI,GAAM,KAAK,OAAO,GACtB,MAAI,KAAQ,QACV,GAAM,IACN,KAAK,IAAI,EAAK,EAAK,IAEd,EAGT,IAAI,EAAa,EAAU,EAAqB,EAAwB,CACtE,KAAK,OAAO,GAAO,EACnB,WAAW,IAAM,CACf,KAAK,IAAI,IACR,GAGL,IAAI,EAAa,CACf,MAAO,MAAK,OAAO,GAGrB,OAAQ,CACN,KAAK,OAAS,GAGhB,OAAO,EAAa,CAClB,MAAO,MAAK,OAAO,KAAS",
  "names": []
}
