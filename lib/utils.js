var x=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var c=r=>i(r,"__esModule",{value:!0});var v=(r,t)=>{c(r);for(var e in t)i(r,e,{get:t[e],enumerable:!0})},w=(r,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of d(t))!h.call(r,n)&&n!=="default"&&i(r,n,{get:()=>t[n],enumerable:!(e=m(t,n))||e.enumerable});return r},o=r=>w(c(i(r!=null?x(y(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);v(exports,{default:()=>S});var f=o(require("crypto")),g=o(require("fs")),u=o(require("nodemailer")),p=o(require("dotenv"));p.default.config();var E=u.default.createTransport({service:"gmail",auth:{user:process.env.EMAIL,pass:process.env.PASSWORD}}),S={computeHash:function(r){return f.default.createHash("sha256").update(r).digest("base64")},generateUID:function(r){return"xxxxxxxx-xxxx-4xxxx-xxx-x".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})},filter:function(r,t,e){if(!t.originalname.match(/\.(jpg|JPG|jpeg|JPEG|png|PNG|jfif|JFIF|webm|WEBM)$/))return r.fileValidationError="Only image files are allowed",e(new Error("Only image files are allowed"),!1);e(null,!0)},getExt:function(r){var t=r.lastIndexOf(".");return t<0?"":r.substr(t)},replaceValues:function(r,t){var r=r.replace(/\[\w*\]/g,function(e,n){return t[e.slice(1,-1)]||e});return r},getFileStream:async function(r){let t=g.default.createReadStream(r);return await new Promise(function(s,l){t.on("data",a=>s(a.toString())),t.on("error",l)})},sendMail:async function(r,t,e,n){let s=await this.getFileStream(e),l={from:process.env.EMAIL,to:r,subject:t,html:this.replaceValues(s,n)};E.sendMail(l,function(a,M){a&&console.log(a)})}};0&&(module.exports={});
//# sourceMappingURL=utils.js.map
